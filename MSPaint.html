<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>MS Paint</title>
    <link rel="stylesheet" href="MSPaint.style.css">
    <script>
        var canvas, ctx, flag = false,
            prevX = 0,
            curX = 0,
            prevY = 0,
            curY = 0,
            isDrawing = false;

        var penColour = "black",
            penWidth = 2;

        window.onload = function () {
            canvas = document.getElementById("canvasSurface");
            ctx = canvas.getContext("2d");
            width = canvas.width;
            height = canvas.height;

            canvas.addEventListener("mousemove", function (e) {
                findCoord("move", e)
            }, false);
            canvas.addEventListener("mousedown", function (e) {
                findCoord("down", e)
            }, false);
            canvas.addEventListener("mouseup", function (e) {
                findCoord("up", e)
            }, false);
            canvas.addEventListener("mouseout", function (e) {
                findCoord("out", e)
            }, false);
        }

        function pickColour(colour) { //
            penColour = colour.id;
        }

        function draw() {
            ctx.beginPath();
            ctx.moveTo(prevX, prevY);
            ctx.lineTo(curX, curY);
            ctx.strokeStyle = penColour;
            ctx.lineWidth = penWidth;
            ctx.stroke();
            ctx.closePath();
        }

        function findCoord(res, e) {
            if (res == "down") {
                prevX = curX;
                prevY = curY;
                curX = e.clientX - canvas.offsetLeft;
                curY = e.clientY - canvas.offsetTop;

                flag = true;
                isDrawing = true;
                if (isDrawing) {
                    ctx.beginPath();
                    ctx.fillStyle = penColour;
                    ctx.fillRect(curX, curY, 2, 2);
                    ctx.closePath();
                    isDrawing = false;
                }
            }

            if (res == "up" || res == "out") {
                flag = false;
            }

            if (res == "move") {
                if (flag) {
                    prevX = curX;
                    prevY = curY;
                    curX = e.clientX - canvas.offsetLeft;
                    curY = e.clientY - canvas.offsetTop;
                    draw();
                }
            }
        }

        function saveCanvas() { //

        }

        function clearCanvas() { //
            var confirmClear = confirm("Clear canvas?");
            if (confirmClear) {
                ctx.clearRect(0, 0, width, height);
                $("#canvasImage").style.display = "none";
            }
        }

        function undoStroke() { //

        }

        function redoStroke() { //

        }
    </script>
</head>

<body>

    <header>
        <img src="icon.png" style="width:100px; height:100px" />

        <hgroup>
            <h5>MS Paint</h5>
            <h6>By Fojilun Hussain</h6>
        </hgroup>

        <nav>
            <a href="https://www.github.com/fojilunhussain">GitHub</a>
            <a href="https://www.instagram.com/maggotsoups/">Instagram</a>
        </nav>
    </header>

    <section>
        <button id="btnUndoStroke" onClick="undoStroke()">Undo</button>
        <button id="btnRedoStroke" onClick="redoStroke()">Redo</button>
        <button onClick="clearCanvas()">Clear</button>
        <button id="btnSaveCanvas" onClick="saveCanvas()">Save</button>
    </section>

    <section>
        <canvas id="canvasSurface" width="500" height="500">
            Your browser does not support HTML5.
        </canvas>

        <img id="canvasImage" />
    </section>

    <footer>
        <section class="palette">
            <div style="background:red; width:10px; height:10px;" id="red" onClick="pickColour(this)"></div>
            <div style="background:orange; width:10px; height:10px;" id="orange" onClick="pickColour(this)"></div>
            <div style="background:yellow; width:10px; height:10px;" id="yellow" onClick="pickColour(this)"></div>
            <div style="background:green; width:10px; height:10px;" id="green" onClick="pickColour(this)"></div>
            <div style="background:blue; width:10px; height:10px;" id="blue" onClick="pickColour(this)"></div>
            <div style="background:purple; width:10px; height:10px;" id="purple" onClick="pickColour(this)"></div>
            <div style="background:pink; width:10px; height:10px;" id="pink" onClick="pickColour(this)"></div>
            <div style="background:brown; width:10px; height:10px;" id="brown" onClick="pickColour(this)"></div>
            <div style="background:black; width:10px; height:10px;" id="black" onClick="pickColour(this)"></div>
            <div style="background:white; width:10px; height:10px;" id="white" onClick="pickColour(this)"></div>
        </section>

        <section>
            <!-- brushes -->
        </section>

        <section>
            <p>Paint used for this colour:</p>
            <span>0%</span>
            <progress value="0" max="100"></progress>
            <span>100%</span>
        </section>
    </footer>

</body>

</html>